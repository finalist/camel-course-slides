<!DOCTYPE html>
<!--
  Copyright 2010 Google Inc.

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.

  Original slides: Marcin Wichary (mwichary@google.com)
  Modifications: Ernest Delgado (ernestd@google.com)
                 Alex Russell (slightlyoff@chromium.org)

  landslide modifications: Adam Zapletal (adamzap@gmail.com)
                           Nicolas Perriault (nperriault@gmail.com)
-->
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Cursus <strong>Camel</strong></title>
    <!-- Styles -->
    
    <link rel="stylesheet" media="print" href="theme/css/print.css">
    <link rel="stylesheet" media="screen, projection" href="theme/css/screen.css">
    
    
    <!-- /Styles -->
    <!-- Javascripts -->
    
    <script type="text/javascript" src="theme/js/slides.js"></script>
    
    
    <!-- /Javascripts -->
</head>
<body>
  <div id="blank"></div>
  <div class="presentation">
    <div id="current_presenter_notes">
      <div id="presenter_note"></div>
    </div>
    <div class="slides">
      
      <!-- slide source: 1-start.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Cursus <strong>Camel</strong></h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="1-start.md">1-start.md</a>
            </aside>
            
            <aside class="page_number">
              1/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 1-start.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Topics</h1></header>
            
            
            <section><p><strong>Integration</strong></p>
<p><strong>Rationale</strong></p>
<p><strong>Routing</strong></p>
<p><strong>Mediation</strong></p>
<p><strong>Beans</strong></p>
<p><strong>Error Handling</strong></p>
<p><strong>Testing</strong></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="1-start.md">1-start.md</a>
            </aside>
            
            <aside class="page_number">
              2/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 1-start.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Referentie</h1></header>
            
            
            <section><p><a href="http://www.manning.com/ibsen/">Camel in Action</a></p>
<p>Auteurs: Claus Ibsen and Jonathan Anstey</p>
<p>Uitgave: Manning, December 2010</p>
<p><img alt="Ibsen" src="resources/ibsen_cover150.jpg" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="1-start.md">1-start.md</a>
            </aside>
            
            <aside class="page_number">
              3/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 2-integratie.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Integratie met <strong>Camel</strong></h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="2-integratie.md">2-integratie.md</a>
            </aside>
            
            <aside class="page_number">
              4/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 2-integratie.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Integratie</h1></header>
            
            
            <section><ul>
<li>Portals (samenbrengen informatie stromen)</li>
<li>Data replicatie</li>
<li>Gedeelde functionaliteit</li>
<li>SOA (service georiënteerde architectuur)</li>
<li>Gedistribueerde bedrijfsprocessen</li>
<li>Business 2 Business integratie</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="2-integratie.md">2-integratie.md</a>
            </aside>
            
            <aside class="page_number">
              5/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 2-integratie.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Enterprise Integration Patterns</h1></header>
            
            
            <section><ul>
<li>Oplossingen voor veel voorkomende integratie vraagstukken</li>
<li><a href="http://www.eaipatterns.com/">EAI Patterns Website</a> </li>
<li><a href="http://www.enterpriseintegrationpatterns.com/toc.html">EAI Patterns</a></li>
</ul>
<p><img alt="Hohpe&amp;Woolf" src="resources/eipbook.jpeg" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="2-integratie.md">2-integratie.md</a>
            </aside>
            
            <aside class="page_number">
              6/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 2-integratie.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            <header><h1>Apache Camel</h1></header>
            
            
            <section><p>Camel is een open source integratie framework</p>
<ul>
<li><strong>Integratie</strong> door middel van routing en mediation engine </li>
<li><strong>Framework</strong> bevat routing engine builder en components</li>
<li><strong>Open Source</strong> ondergebracht bij Apache </li>
</ul>
<p class="notes">routing &amp; mediation = bepalen: regels voor routering, bronnen van waaruit messages worden geacepteerd, hoe deze te verwerken en door te sturen</p>
<p class="notes">components: ondersteuning voor meer dan 80 protocollen en datatypes voor transport en transformaties</p>
<p>http://camel.apache.org/</p>
<p><img alt="Camel" src="resources/apache-camel.png" /></p>
<p class="notes">Camel is géen ESB, hoogstens een lightweight ESB (wel monitoring en orchestratie, geen container of message bus)</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="2-integratie.md">2-integratie.md</a>
            </aside>
            
            <aside class="page_number">
              7/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 2-integratie.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Apache Architectuur</h1></header>
            
            
            <section><p><img alt="architectuur" src="resources/architecture.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="2-integratie.md">2-integratie.md</a>
            </aside>
            
            <aside class="page_number">
              8/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3-rationale.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Waarom <strong>Camel</strong>?</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3-rationale.md">3-rationale.md</a>
            </aside>
            
            <aside class="page_number">
              9/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3-rationale.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            <header><h1>Waarom Camel?</h1></header>
            
            
            <section><p>(volgens "Camel in Action")</p>
<p><strong>Routing and mediation engine</strong></p>
<p class="notes">routes worden geconfigureerd d.m.v. een combinatie van EIP's en een DSL</p>
<p><strong>Enterprise Integration Patterns (EIP)</strong></p>
<p><strong>Domain-specific languages (DSL)</strong></p>
<p class="notes">Camel biedt (interne) DSL's in verschillende host programmeertalen, a.k.a. fluent interfaces</p>
<ul>
<li>Zie ook: <a href="http://martinfowler.com/bliki/DomainSpecificLanguage.html">Fowler over DSL's</a></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3-rationale.md">3-rationale.md</a>
            </aside>
            
            <aside class="page_number">
              10/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3-rationale.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>DSL voorbeelden</h1></header>
            
            
            <section><p>Java</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;file:data/inbox&quot;</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;jms:queue:order&quot;</span><span class="o">);</span>
</pre></div>

<p>Spring DSL</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="nt">&lt;route&gt;</span>
<span class="lineno">2</span>     <span class="nt">&lt;from</span> <span class="na">uri=</span><span class="s">&quot;file:data/inbox&quot;</span><span class="nt">/&gt;</span>
<span class="lineno">3</span>     <span class="nt">&lt;to</span> <span class="na">uri=</span><span class="s">&quot;jms:queue:order&quot;</span><span class="nt">/&gt;</span>
<span class="lineno">4</span> <span class="nt">&lt;/route&gt;</span>
</pre></div>

<p>Scala</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">from</span> <span class="s">&quot;file:data/inbox&quot;</span> <span class="o">-&gt;</span> <span class="s">&quot;jms:queue:order&quot;</span>
</pre></div>

<p class="notes">vermeld IDE support: code completion, compiler error detection e.d.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3-rationale.md">3-rationale.md</a>
            </aside>
            
            <aside class="page_number">
              11/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3-rationale.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            <header><h1>Waarom Camel?</h1></header>
            
            
            <section><p><strong>Extensive component library</strong></p>
<ul>
<li>Zie ook: <a href="http://fusesource.com/docs/router/2.8/component_ref/front.html">Fuse component reference</a></li>
</ul>
<p class="notes">80+ componenten voor verschillende transport mechanismes, API's, dataformaten</p>
<p><strong>Payload-agnostic router</strong></p>
<p class="notes">niet alleen beperkt tot bijvoorbeeld XML</p>
<p><strong>Modular and pluggable architecture</strong></p>
<p class="notes">componenten van Camel, third party of custom, e.g. Bibliotheek adapters</p>
<p><strong>POJO model</strong></p>
<p class="notes">beans of POJO's zijn first-class citizens</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3-rationale.md">3-rationale.md</a>
            </aside>
            
            <aside class="page_number">
              12/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3-rationale.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Waarom Camel?</h1></header>
            
            
            <section><p><strong>Easy configuration</strong></p>
<p class="notes">convention over configuration, e.g. URI configuratie:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;file:data/inbox?recursive=true&amp;include=*.txt&quot;</span><span class="o">)...</span>
</pre></div>

<p><strong>(Automatic) type converters</strong></p>
<p class="notes">150+ converters, kunt ook je eigen converters toevoegen</p>
<p><strong>Lightweight core</strong></p>
<p class="notes">beperkt in termn van omvang en dependencies</p>
<ul>
<li>Zie ook: <a href="http://mvnrepository.com/artifact/org.apache.camel/camel-core/2.9.2">camel-core in Maven repository</a></li>
</ul>
<p><strong>Test kit</strong></p>
<p class="notes">bevat support classes, endpoint mocks, expectations, interceptors e.d.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3-rationale.md">3-rationale.md</a>
            </aside>
            
            <aside class="page_number">
              13/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3-rationale.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Waarom Camel?</h1></header>
            
            
            <section><p><strong>Vibrant community</strong></p>
<ul>
<li><a href="http://camel.apache.org">Camel website</a></li>
<li><a href="http://fusesource.com/products/enterprise-camel/#documentation">Fusesource website</a></li>
<li><a href="http://code.google.com/a/apache-extras.org/p/camel-extra/">camel-extra</a></li>
<li><a href="https://issues.apache.org/jira/browse/CAMEL">JIRA</a></li>
<li><a href="http://camel.apache.org/contributing.html">Contributing</a></li>
<li><a href="http://camel.apache.org/mailing-lists.html">Mailing lists</a></li>
<li><a href="http://camel.apache.org/irc-room.html">IRC</a></li>
<li><a href="http://camel.apache.org/articles.html">Articles</a></li>
<li><a href="http://camel.apache.org/user-stories.html">User stories</a></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3-rationale.md">3-rationale.md</a>
            </aside>
            
            <aside class="page_number">
              14/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 3-rationale.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Camel voorbeeld</h1></header>
            
            
            <section><p>Eerste voorbeeld uit de <a href="http://code.google.com/p/camelinaction/">Camel in Action source code</a>:</p>
<p>chapter1/file-copy</p>
<p><img alt="file-copy" src="resources/file-copy.png" /></p>
<p class="notes">show 1) pom.xml 2) FileCopier 3) FileCopierCamel</p>
<p>Uitvoeren met:</p>
<div class="highlight"><pre><span class="lineno">1</span> mvn compile <span class="nb">exec</span>:java <span class="se">\</span>
<span class="lineno">2</span> &gt; -Dexec.mainClass<span class="o">=</span>camelinaction.FileCopierWithCamel
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="3-rationale.md">3-rationale.md</a>
            </aside>
            
            <aside class="page_number">
              15/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4-routing.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Routing met <strong>Camel</strong></h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4-routing.md">4-routing.md</a>
            </aside>
            
            <aside class="page_number">
              16/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4-routing.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            <header><h1>Message</h1></header>
            
            
            <section><p>Met een <strong>Message</strong> kun je data van het ene naar het andere systeem sturen</p>
<p><img alt="message" src="resources/message.png" /></p>
<p>Een Camel <strong>Message</strong> heeft een body, headers en optionele attachments</p>
<p class="notes">body = payload</p>
<p><img alt="headers-attachments-body" src="resources/headers-attachments-body.png" /></p>
<p class="notes">kunnen ook faults bevatten, t.b.v. SOAP en JBI</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4-routing.md">4-routing.md</a>
            </aside>
            
            <aside class="page_number">
              17/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4-routing.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            <header><h1>Exchange</h1></header>
            
            
            <section><p><strong>Exchange</strong> is het vehikel voor binnenkomende en uitgaande <strong>Messages</strong>, aangevuld met nog wat meta-informatie en een eventuele Exception</p>
<p><img alt="exchange" src="resources/exchange.png" /></p>
<p class="notes">Een exchange ondersteunt verschillende soorten Message Exchange Patterns. MEPs worden gebruikt om verschillende message exchange stijlen te onderscheiden, zoals InOnly en InOut</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4-routing.md">4-routing.md</a>
            </aside>
            
            <aside class="page_number">
              18/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4-routing.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            <header><h1>CamelContext en Registry</h1></header>
            
            
            <section><p>De <strong>CamelContext</strong> is de runtime omgeving en bevat verschillende onderdelen, waaronder de <strong>Registry</strong>.</p>
<p><img alt="camelcontext" src="resources/camelcontext.png" /></p>
<p>De <strong>Registry</strong> wordt gebruikt om beans op te zoeken</p>
<p class="notes">is afhankelijk van de container</p>
<p>Camel ondersteunt verschillende <strong>Registry</strong> types:</p>
<ul>
<li>SimpleRegistry</li>
<li>JNDI Registry</li>
<li>Spring ApplicationContext Registry</li>
<li>OSGi Registry</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4-routing.md">4-routing.md</a>
            </aside>
            
            <aside class="page_number">
              19/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4-routing.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Route, Processor, DSL en Routing Engine</h1></header>
            
            
            <section><p>Een <strong>Route</strong> is een eindige keten van <strong>Processors</strong>, met een begin ("from") en een eind ("to")</p>
<p class="notes">flexibiliteit van routes benadrukken, hebben ook een identifier zodat ze kunnen worden gemanaged</p>
<p>Een <strong>Processor</strong> is een onderdeel waarmee een <strong>Exchange</strong> kan worden gemanipuleerd</p>
<p><strong>Routes</strong> worden gedefinieerd met de <strong>DSL</strong></p>
<p class="notes">In Camel komt dit neer op een fluent Java API die methods bevat voor EIP termen</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;file:data/inbox&quot;</span><span class="o">)</span>
<span class="lineno">2</span>     <span class="o">.</span><span class="na">filter</span><span class="o">().</span><span class="na">xpath</span><span class="o">(</span><span class="s">&quot;/order[not(@test)]&quot;</span><span class="o">)</span>
<span class="lineno">3</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;jms:queue:order&quot;</span><span class="o">)</span>
</pre></div>

<p class="notes">instinkers: 1) scope van de de DSL, 2) volgorde</p>
<p>De <strong>Routing Engine</strong> betreft het mechanisme waarmee messages op de juiste manier verplaatst</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4-routing.md">4-routing.md</a>
            </aside>
            
            <aside class="page_number">
              20/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4-routing.md -->
      <div class="slide-wrapper">
        <div class="slide has_notes">
          <div class="inner">
            
            <header><h1>Endpoint, Channel en Component</h1></header>
            
            
            <section><p>Een <strong>Endpoint</strong> betreft het uiteinde van een <strong>Channel</strong></p>
<p><img alt="endpoint" src="resources/endpoint.png" /></p>
<p>Een <strong>Endpoint</strong> wordt geconfigureerd door middel van een URI:</p>
<p><img alt="uri" src="resources/uri.png" /></p>
<p>Een <strong>Component</strong> is een soort factory voor <strong>Endpoints</strong></p>
<p class="notes">Er zijn 80+ verschillende componenten die out-of-the-box met Camel worden meegeleverd</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4-routing.md">4-routing.md</a>
            </aside>
            
            <aside class="page_number">
              21/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4-routing.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Consumers en Producers</h1></header>
            
            
            <section><p>Een <strong>Consumer</strong> haalt de messages op van een extern systeem, via verschillende mechanismen, bijvoorbeeld <em>polling</em> of <em>request handling</em>, of op een <em>event-gedreven</em> manier.</p>
<p>Een <strong>Producer</strong> stuurt messages door naar een extern systeem.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4-routing.md">4-routing.md</a>
            </aside>
            
            <aside class="page_number">
              22/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 4-routing.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Oefening: Camel Routing</h1></header>
            
            
            <section><p>Oefening waarbij de verschillende Camel Routing concepten aan bod komen.</p>
<p>Maak gebruik van de <a href="http://camel.apache.org/maven/current/camel-core/apidocs/index.html">Camel API docs</a></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="4-routing.md">4-routing.md</a>
            </aside>
            
            <aside class="page_number">
              23/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5-mediation.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Mediation met <strong>Camel</strong></h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5-mediation.md">5-mediation.md</a>
            </aside>
            
            <aside class="page_number">
              24/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5-mediation.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Data transformatie</h1></header>
            
            
            <section><p><strong>Mediation</strong>: het 'bemiddelen' tussen heterogene IT systemen die veelal conform uiteenlopende protocollen werken</p>
<p>Dit komt vaak neer op het transformeren van data die tussen IT systemen wordt uitgewisseld</p>
<p>Twee typen van data transformatie:</p>
<p>Data <strong>format</strong> transformation</p>
<ul>
<li>Voorbeeld: transformatie van CSV naar XML</li>
</ul>
<p>Data <strong>type</strong> transformation</p>
<ul>
<li>Voorbeeld: transformatie van <code>java.lang.String</code> naar <code>javax.jms.Textmessage</code></li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5-mediation.md">5-mediation.md</a>
            </aside>
            
            <aside class="page_number">
              25/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5-mediation.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Data transformatie</h1></header>
            
            
            <section><p>Transformatie met <strong>routes</strong></p>
<ul>
<li>E.g. Message Translator of Content Enricher EIPs</li>
</ul>
<p>Transformatie met <strong>components</strong></p>
<ul>
<li>E.g. XSLT component voor XML transformatie</li>
</ul>
<p>Transformatie met <strong>data formats</strong></p>
<ul>
<li>E.g. XML met JAXB of Protobuf; JSON met Jackson of XStream</li>
</ul>
<p>Transformatie met <strong>templates</strong></p>
<ul>
<li>E.g. Apache Velocity of FreeMarker</li>
</ul>
<p>Transformatie met <strong>type converters</strong></p>
<ul>
<li>E.g. van <code>java.io.File</code> naar <code>java.lang.String</code>s</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5-mediation.md">5-mediation.md</a>
            </aside>
            
            <aside class="page_number">
              26/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5-mediation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Transformatie met routes</h1></header>
            
            
            <section><p>Message Translator EIP via een Processor:</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">OrderToCsvProcessor</span> <span class="kd">implements</span> <span class="n">Processor</span> <span class="o">{</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span>     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span> <span class="n">Exchange</span> <span class="n">exchange</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="lineno"> 4</span>         <span class="n">String</span> <span class="n">custom</span> <span class="o">=</span> <span class="n">exchange</span><span class="o">.</span><span class="na">getIn</span><span class="o">().</span><span class="na">getBody</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
<span class="lineno"> 5</span>         <span class="n">String</span> <span class="n">id</span> <span class="o">=</span> <span class="n">custom</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">9</span><span class="o">);</span>
<span class="lineno"> 6</span>         <span class="n">String</span> <span class="n">customerId</span> <span class="o">=</span> <span class="n">custom</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">19</span><span class="o">);</span>
<span class="lineno"> 7</span>         <span class="n">String</span> <span class="n">date</span> <span class="o">=</span> <span class="n">custom</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">20</span><span class="o">,</span> <span class="mi">29</span><span class="o">);</span>
<span class="lineno"> 8</span>         <span class="n">String</span> <span class="n">items</span> <span class="o">=</span> <span class="n">custom</span><span class="o">.</span><span class="na">substring</span><span class="o">(</span><span class="mi">30</span><span class="o">);</span>
<span class="lineno"> 9</span>         <span class="n">String</span><span class="o">[]</span> <span class="n">itemIds</span> <span class="o">=</span> <span class="n">items</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">&quot;@&quot;</span><span class="o">);</span>
<span class="lineno">10</span>         <span class="n">StringBuilder</span> <span class="n">csv</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">();</span>
<span class="lineno">11</span>         <span class="n">csv</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">id</span><span class="o">.</span><span class="na">trim</span><span class="o">());</span>
<span class="lineno">12</span>         <span class="n">csv</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;,&quot;</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">date</span><span class="o">.</span><span class="na">trim</span><span class="o">());</span>
<span class="lineno">13</span>         <span class="n">csv</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;,&quot;</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">customerId</span><span class="o">.</span><span class="na">trim</span><span class="o">());</span>
<span class="lineno">14</span>         <span class="k">for</span> <span class="o">(</span><span class="n">String</span> <span class="n">item</span> <span class="o">:</span> <span class="n">itemIds</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">15</span>             <span class="n">csv</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">&quot;,&quot;</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">trim</span><span class="o">());</span>
<span class="lineno">16</span>         <span class="o">}</span>
<span class="lineno">17</span>         <span class="n">exchange</span><span class="o">.</span><span class="na">getIn</span><span class="o">().</span><span class="na">setBody</span><span class="o">(</span><span class="n">csv</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
<span class="lineno">18</span>     <span class="o">}</span>
<span class="lineno">19</span> <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5-mediation.md">5-mediation.md</a>
            </aside>
            
            <aside class="page_number">
              27/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5-mediation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Transformatie met routes</h1></header>
            
            
            <section><p>Gebruik van <code>OrderToCsvProcessor</code> in een Camel route:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;quartz://report?cron=0+0+6+*+*+?&quot;</span><span class="o">)</span>
<span class="lineno">2</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;http://riders.com/orders/cmd=received&amp;date=yesterday&quot;</span><span class="o">)</span> 
<span class="lineno">3</span>     <span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="k">new</span> <span class="n">OrderToCsvProcessor</span><span class="o">())</span>
<span class="lineno">4</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;file://riders/orders?fileName=report-${header.Date}.csv&quot;</span><span class="o">);</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5-mediation.md">5-mediation.md</a>
            </aside>
            
            <aside class="page_number">
              28/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5-mediation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Transformatie met components</h1></header>
            
            
            <section><p>XSLT transformatie:</p>
<p><img alt="xslt" src="resources/xslt.png" /></p>
<p>Gebruik van de XSLT component in een Camel route:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;file://rider/inbox&quot;</span><span class="o">)</span>
<span class="lineno">2</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;xslt://camelinaction/transform.xsl&quot;</span><span class="o">)</span>
<span class="lineno">3</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;activemq:queue:transformed&quot;</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5-mediation.md">5-mediation.md</a>
            </aside>
            
            <aside class="page_number">
              29/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5-mediation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Transformatie met data formats</h1></header>
            
            
            <section><p>Marshallen en unmarshallen van data:</p>
<p><img alt="marshal" src="resources/marshal.png" /></p>
<p>Gebruik van de camel-csv data format in een Camel route:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;file://rider/csvfiles&quot;</span><span class="o">)</span>
<span class="lineno">2</span>     <span class="o">.</span><span class="na">unmarshal</span><span class="o">().</span><span class="na">csv</span><span class="o">()</span>
<span class="lineno">3</span>     <span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="n">body</span><span class="o">()).</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;activemq:queue.csv.record&quot;</span><span class="o">);</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5-mediation.md">5-mediation.md</a>
            </aside>
            
            <aside class="page_number">
              30/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5-mediation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Transformatie met templates</h1></header>
            
            
            <section><p>Velocity template voorbeeld:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="x">Dear customer</span>
<span class="lineno">2</span> <span class="x">Thank you for ordering </span><span class="p">${</span><span class="nv">body</span><span class="p">.</span><span class="nv">amount</span><span class="p">}</span><span class="x"> piece(s) of </span><span class="p">${</span><span class="nv">body</span><span class="p">.</span><span class="nv">name</span><span class="p">}</span><span class="x"> </span>
<span class="lineno">3</span> <span class="x">at a cost of </span><span class="p">${</span><span class="nv">body</span><span class="p">.</span><span class="nv">price</span><span class="p">}</span><span class="x">.</span>
<span class="lineno">4</span> <span class="x">This is an automated email, please do not reply.</span>
</pre></div>

<p>Camel Route:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;direct:sendMail&quot;</span><span class="o">)</span>
<span class="lineno">2</span>     <span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">&quot;Subject&quot;</span><span class="o">,</span> <span class="n">constant</span><span class="o">(</span><span class="s">&quot;Thanks for ordering&quot;</span><span class="o">))</span> 
<span class="lineno">3</span>     <span class="o">.</span><span class="na">setHeader</span><span class="o">(</span><span class="s">&quot;From&quot;</span><span class="o">,</span> <span class="n">constant</span><span class="o">(</span><span class="s">&quot;donotreply@riders.com&quot;</span><span class="o">))</span> 
<span class="lineno">4</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;velocity://rider/mail.vm&quot;</span><span class="o">)</span> 
<span class="lineno">5</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;smtp://mail.riders.com?user=camel&amp;password=secret&quot;</span><span class="o">);</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5-mediation.md">5-mediation.md</a>
            </aside>
            
            <aside class="page_number">
              31/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 5-mediation.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Transformatie met type converters</h1></header>
            
            
            <section><p>Camel biedt een ingebouwd type-converter systeem waarmee op automatische wijze tussen gangbare data types wordt geconverteerd.</p>
<p>Bijvoorbeeld, als in de <code>OrderToCsvProcessor</code>:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">String</span> <span class="n">custom</span> <span class="o">=</span> <span class="n">exchange</span><span class="o">.</span><span class="na">getIn</span><span class="o">().</span><span class="na">getBody</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</pre></div>

<p>Camel gebruikt daarbij de <code>TypeConverterRegistry</code> om een geschikte <code>TypeConverter</code> te vinden.</p>
<p>Camel Route:</p>
<p>Oefening!</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="5-mediation.md">5-mediation.md</a>
            </aside>
            
            <aside class="page_number">
              32/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1><strong>Camel</strong> Beans</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              33/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Uitdaging</h1></header>
            
            
            <section><p>Inherente problemen met component models (zoals CORBA, EJB, JBI, SCA, OSGi):</p>
<ul>
<li>Leaky abstractions</li>
<li>Programmeren met restricties</li>
<li>Beperkte testbaarheid</li>
<li>...</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              34/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Camel met Beans</h1></header>
            
            
            <section><p>Bean voorbeeld:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloBean</span> <span class="o">{</span>
<span class="lineno">2</span>     <span class="kd">public</span> <span class="n">String</span> <span class="nf">hello</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">3</span>         <span class="k">return</span> <span class="s">&quot;Hello &quot;</span> <span class="o">+</span> <span class="n">name</span><span class="o">;</span>
<span class="lineno">4</span>     <span class="o">}</span> 
<span class="lineno">5</span> <span class="o">}</span>
</pre></div>

<p>Bean declaratie in Spring applicationContext:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;helloBean&quot;</span> <span class="na">class=</span><span class="s">&quot;camelinaction.HelloBean&quot;</span><span class="nt">/&gt;</span>
</pre></div>

<p>Toepassen bean referentie in Camel route:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">configure</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="lineno">2</span>     <span class="n">from</span><span class="o">(</span><span class="s">&quot;direct:hello&quot;</span><span class="o">).</span><span class="na">beanRef</span><span class="o">(</span><span class="s">&quot;helloBean&quot;</span><span class="o">,</span> <span class="s">&quot;hello&quot;</span><span class="o">);</span>
<span class="lineno">3</span> <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              35/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Selecteren van beans</h1></header>
            
            
            <section><p>De <strong>Service Activator</strong> medieert tussen de requester en de POJO service:</p>
<p><img alt="service-activator-pattern" src="resources/service-activator-pattern.png" /></p>
<p>De service activator is de <code>BeanProcessor</code> in Camel</p>
<p>De POJO service is onze <code>HelloBean</code> bean</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              36/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Selecteren van bean methods</h1></header>
            
            
            <section><p><img alt="selection1" src="resources/selection1.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              37/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Selecteren van bean methods</h1></header>
            
            
            <section><p><img alt="selection2" src="resources/selection2.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              38/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Selecteren van bean en methods</h1></header>
            
            
            <section><p>Oefening!</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              39/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Opzoeken van beans</h1></header>
            
            
            <section><p><img alt="beanprocessor" src="resources/beanprocessor.png" /></p>
<p>De bean wordt aan de hand van de <code>beanRef</code> opgezocht in Camel's bean registry</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              40/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Opzoeken van beans</h1></header>
            
            
            <section><p>Oefening!</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              41/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Parameter binding</h1></header>
            
            
            <section><p><img alt="parameterbinding" src="resources/parameterbinding.png" /></p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              42/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 6-beans.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Parameter binding</h1></header>
            
            
            <section><p>Oefening!</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="6-beans.md">6-beans.md</a>
            </aside>
            
            <aside class="page_number">
              43/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Error Handling met <strong>Camel</strong></h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              44/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Error Handling</h1></header>
            
            
            <section><p><img alt="errorhandling" src="resources/errorhandling.png" /></p>
<p>Error handling is van toepassing gedurende de lifecycle van deze exchange</p>
<p>Errors komen in twee soorten:</p>
<ul>
<li>Recoverable</li>
<li>Irrecoverable</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              45/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Throwable/Exception</h1></header>
            
            
            <section><p>Errors van het type 'recoverable' worden binnen de Exchange gerepresenteerd als een <code>Throwable</code> of <code>Exception</code> en worden ongeveer als volgt gezet:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="k">try</span> <span class="o">{</span>
<span class="lineno">2</span>     <span class="n">processor</span><span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="n">exchange</span><span class="o">);</span>
<span class="lineno">3</span> <span class="o">}</span>
<span class="lineno">4</span> <span class="k">catch</span><span class="o">(</span><span class="n">Throwable</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
<span class="lineno">5</span>     <span class="n">exchange</span><span class="o">.</span><span class="na">setException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
<span class="lineno">6</span> <span class="o">}</span>
</pre></div>

<p class="notes"><code>getException</code> geeft geen <code>Throwable</code> terug vanwege API compatibility.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              46/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Fault</h1></header>
            
            
            <section><p>Errors van het type 'irrecoverable' worden gerepresenteerd als een message met een 'fault flag', bijvoorbeeld:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">Message</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">Exchange</span><span class="o">.</span><span class="na">getOut</span><span class="o">();</span>
<span class="lineno">2</span> <span class="n">msg</span><span class="o">.</span><span class="na">setFault</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>
<span class="lineno">3</span> <span class="n">msg</span><span class="o">.</span><span class="na">setBody</span><span class="o">(</span><span class="s">&quot;Unknown customer&quot;</span><span class="o">);</span>
</pre></div>

<p class="notes">het concept van fault message is een resultaat van de JBI specificatie die vanaf het begin door Camel is gevolgd</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              47/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Error handlers</h1></header>
            
            
            <section><p>Camel error handlers gaan pas 'handlen' wanneer er excepties zijn toegevoegd aan de Exchange.</p>
<p>Typen error handlers:</p>
<ul>
<li>DefaultErrorHandler</li>
<li>DeadLetterChannel</li>
<li>TransactionErrorHandler</li>
<li>NoErrorHandler</li>
<li>LoggingErrorHandler</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              48/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>DefaultErrorHandler</h1></header>
            
            
            <section><p>Voorbeeld:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;direct:newOrder&quot;</span><span class="o">)</span>
<span class="lineno">2</span>     <span class="o">.</span><span class="na">beanRef</span><span class="o">(</span><span class="s">&quot;orderService, &quot;</span><span class="n">validate</span><span class="s">&quot;)</span>
<span class="lineno">3</span> <span class="s">    .beanRef(&quot;</span><span class="n">orderService</span><span class="o">,</span> <span class="s">&quot;store&quot;</span><span class="o">);</span>
</pre></div>

<p><img alt="routpath" src="resources/routepath.png" /></p>
<p>De <code>DefaultErrorHandler</code> werkt daarbij als volgt:</p>
<p>Wanneer er een fout optreedt bij 3) dan wordt er een exception gegoooid die terug wordt gepropageerd naar 2) en vervolgens zal de ErrorHandler deze catchen</p>
<p>Op dat moment zou Camel het met de message opnieuw kunnen proberen (redelivery), maar bij de <code>DefaultErrorHandler</code> gebeurt dat niet.</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              49/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Error Handler features</h1></header>
            
            
            <section><p>De verschillende ErrorHandlers onderscheiden zich van elkaar aan de hand van de volgende features:</p>
<ul>
<li>Redelivery policy</li>
<li>Scope</li>
<li>Exception policies</li>
<li>Error handling</li>
</ul></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              50/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Redelivery policy</h1></header>
            
            
            <section><ul>
<li>Bepaalt of redelivery plaatsvindt</li>
<li>Zo ja, het maximaal aantal pogingen</li>
<li>De tijdsinterval tussen pogingen</li>
<li>Etc.</li>
</ul>
<p>Voorbeeld:</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="n">errorHandler</span><span class="o">(</span><span class="n">defaultErrorHandler</span><span class="o">()</span>
<span class="lineno"> 2</span>     <span class="o">.</span><span class="na">maximumRedeliveries</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
<span class="lineno"> 3</span>     <span class="o">.</span><span class="na">redeliveryDelay</span><span class="o">(</span><span class="mi">1000</span><span class="o">)</span>
<span class="lineno"> 4</span>     <span class="o">.</span><span class="na">retryAttemptedLogLevel</span><span class="o">(</span><span class="n">LoggingLevel</span><span class="o">.</span><span class="na">WARN</span><span class="o">));</span>
<span class="lineno"> 5</span> 
<span class="lineno"> 6</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;seda:queue.inbox&quot;</span><span class="o">)</span>
<span class="lineno"> 7</span>     <span class="o">.</span><span class="na">beanRef</span><span class="o">(</span><span class="s">&quot;orderService&quot;</span><span class="o">,</span><span class="s">&quot;validate&quot;</span><span class="o">)</span>
<span class="lineno"> 8</span>     <span class="o">.</span><span class="na">beanRef</span><span class="o">(</span><span class="s">&quot;orderService&quot;</span><span class="o">,</span><span class="s">&quot;enrich&quot;</span><span class="o">)</span>
<span class="lineno"> 9</span>     <span class="o">.</span><span class="na">log</span><span class="o">(</span><span class="s">&quot;Received order ${body}&quot;</span><span class="o">)</span>
<span class="lineno">10</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;mock:queue.order&quot;</span><span class="o">);</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              51/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Scope</h1></header>
            
            
            <section><p>Twee scope levels: context en route</p>
<p>Voorbeeld:</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="n">errorHandler</span><span class="o">(</span><span class="n">defaultErrorHandler</span><span class="o">()</span>
<span class="lineno"> 2</span>     <span class="o">.</span><span class="na">maximumRedeliveries</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
<span class="lineno"> 3</span>     <span class="o">.</span><span class="na">redeliveryDelay</span><span class="o">(</span><span class="mi">1000</span><span class="o">)</span>
<span class="lineno"> 4</span>     <span class="o">.</span><span class="na">retryAttemptedLogLevel</span><span class="o">(</span><span class="n">LoggingLevel</span><span class="o">.</span><span class="na">WARN</span><span class="o">));</span>
<span class="lineno"> 5</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;file://target/orders?delay=10000&quot;</span><span class="o">)</span>
<span class="lineno"> 6</span>     <span class="o">.</span><span class="na">beanRef</span><span class="o">(</span><span class="s">&quot;orderService&quot;</span><span class="o">,</span> <span class="s">&quot;toCsv&quot;</span><span class="o">)</span>
<span class="lineno"> 7</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;mock:file&quot;</span><span class="o">)</span>
<span class="lineno"> 8</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;seda:queue.inbox&quot;</span><span class="o">);</span>
<span class="lineno"> 9</span>     <span class="n">from</span><span class="o">(</span><span class="s">&quot;seda:queue.inbox&quot;</span><span class="o">)</span>
<span class="lineno">10</span> <span class="o">.</span><span class="na">errorHandler</span><span class="o">(</span><span class="n">deadLetterChannel</span><span class="o">(</span><span class="s">&quot;log:DLC&quot;</span><span class="o">)</span>
<span class="lineno">11</span>     <span class="o">.</span><span class="na">maximumRedeliveries</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
<span class="lineno">12</span>     <span class="o">.</span><span class="na">retryAttemptedLogLevel</span><span class="o">(</span><span class="n">LoggingLevel</span><span class="o">.</span><span class="na">INFO</span><span class="o">)</span>
<span class="lineno">13</span>     <span class="o">.</span><span class="na">redeliveryDelay</span><span class="o">(</span><span class="mi">250</span><span class="o">)</span>
<span class="lineno">14</span>     <span class="o">.</span><span class="na">backOffMultiplier</span><span class="o">(</span><span class="mi">2</span><span class="o">))</span> 
<span class="lineno">15</span>     <span class="o">.</span><span class="na">beanRef</span><span class="o">(</span><span class="s">&quot;orderService&quot;</span><span class="o">,</span> <span class="s">&quot;validate&quot;</span><span class="o">)</span>
<span class="lineno">16</span>     <span class="o">.</span><span class="na">beanRef</span><span class="o">(</span><span class="s">&quot;orderService&quot;</span><span class="o">,</span> <span class="s">&quot;enrich&quot;</span><span class="o">)</span>
<span class="lineno">17</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;mock:queue.order&quot;</span><span class="o">);</span>        <span class="err">￼￼</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              52/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide has_code has_notes">
          <div class="inner">
            
            <header><h1>Error handling: exception policies</h1></header>
            
            
            <section><p>Intercepten en afhandelen van specifieke exceptions door middel van de <code>onException</code> method in de route.</p>
<p>Uitgaande van de volgend Exception hierarchie:</p>
<div class="highlight"><pre><span class="lineno">1</span> org.apache.camel.RuntimeCamelException
<span class="lineno">2</span> com.mycompany.OrderFailedException
<span class="lineno">3</span> java.net.ConnectException
</pre></div>

<p>waarbij de ConnectException wordt gewrapt in de OrderFailedException (en vervolgens door Camel gewrapt in de RuntimeCamelException)</p>
<p>Hoe wordt het volgende afgehandeld?</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">onException</span><span class="o">(</span><span class="n">OrderFailedException</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">maximumRedeliveries</span><span class="o">(</span><span class="mi">3</span><span class="o">);</span>
</pre></div>

<p class="notes">dit zal resulteren in allereerst het evalueren van de ConnectException en kijken of deze gelijk is aan of een subclass is van OrderFailedException, vervolgens wordt een niveau hoger gekeken in de exception hierarchie en zal vervolgens een match vinden</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              53/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 7-errorhandling.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Error Handling</h1></header>
            
            
            <section><p>Oefening!</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="7-errorhandling.md">7-errorhandling.md</a>
            </aside>
            
            <aside class="page_number">
              54/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 8-testing.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Testen met <strong>Camel</strong></h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="8-testing.md">8-testing.md</a>
            </aside>
            
            <aside class="page_number">
              55/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 8-testing.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Camel JUnit Extensions</h1></header>
            
            
            <section><p>JUnit 3.x classes:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">camel</span><span class="o">.</span><span class="na">test</span><span class="o">.</span><span class="na">TestSupport</span>
<span class="lineno">2</span> <span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">camel</span><span class="o">.</span><span class="na">test</span><span class="o">.</span><span class="na">CamelTestSupport</span>
<span class="lineno">3</span> <span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">camel</span><span class="o">.</span><span class="na">test</span><span class="o">.</span><span class="na">CamelSpringTestSupport</span>
</pre></div>

<p>JUnit 4.x classes:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">camel</span><span class="o">.</span><span class="na">test</span><span class="o">.</span><span class="na">junit4</span><span class="o">.</span><span class="na">TestSupport</span>
<span class="lineno">2</span> <span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">camel</span><span class="o">.</span><span class="na">test</span><span class="o">.</span><span class="na">junit4</span><span class="o">.</span><span class="na">CamelTestSupport</span>
<span class="lineno">3</span> <span class="n">org</span><span class="o">.</span><span class="na">apache</span><span class="o">.</span><span class="na">camel</span><span class="o">.</span><span class="na">test</span><span class="o">.</span><span class="na">junit4</span><span class="o">.</span><span class="na">CamelSpringTestSupport</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="8-testing.md">8-testing.md</a>
            </aside>
            
            <aside class="page_number">
              56/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 8-testing.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Camel JUnit Extensions</h1></header>
            
            
            <section><p>Insert Listing 6.1</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="8-testing.md">8-testing.md</a>
            </aside>
            
            <aside class="page_number">
              57/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 8-testing.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Using the Mock component</h1></header>
            
            
            <section><p>De Mock component is bruikbaar wanneer de 'echte' component:</p>
<ul>
<li>Niet voorhanden is</li>
<li>Te langzaam is</li>
<li>Gemodificeerd moet worden om deze testbaar te maken</li>
<li>Nondeterministische resultaten teruggeeft</li>
</ul>
<p>Voorbeeld:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;jms:topic:quote&quot;</span><span class="o">).</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;mock:quote&quot;</span><span class="o">)</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="8-testing.md">8-testing.md</a>
            </aside>
            
            <aside class="page_number">
              58/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 8-testing.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>MockEndpoint methods</h1></header>
            
            
            <section><div class="highlight"><pre><span class="lineno">1</span> <span class="n">expectedMessageCount</span><span class="o">(</span><span class="kt">int</span> <span class="n">count</span><span class="o">)</span>
<span class="lineno">2</span> <span class="n">expectedMinimumMessageCount</span> <span class="o">(</span><span class="kt">int</span> <span class="n">count</span><span class="o">)</span>
<span class="lineno">3</span> <span class="n">expectedBodiesReceived</span> <span class="o">(</span><span class="n">Object</span><span class="o">...</span> <span class="n">bodies</span><span class="o">)</span>
<span class="lineno">4</span> <span class="n">expectedBodiesReceivedInAnyOrder</span> <span class="o">(</span><span class="n">Object</span><span class="o">...</span> <span class="n">bodies</span><span class="o">)</span>
<span class="lineno">5</span> <span class="n">assertIsSatisfied</span><span class="o">()</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="8-testing.md">8-testing.md</a>
            </aside>
            
            <aside class="page_number">
              59/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 8-testing.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>MockEndpoint voorbeeld</h1></header>
            
            
            <section><p>Listing 6.6</p></section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="8-testing.md">8-testing.md</a>
            </aside>
            
            <aside class="page_number">
              60/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 8-testing.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Simuleren van componenten</h1></header>
            
            
            <section><div class="highlight"><pre><span class="lineno">1</span> <span class="nd">@Override</span>
<span class="lineno">2</span> <span class="kd">protected</span> <span class="n">CamelContext</span> <span class="nf">createCamelContext</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="lineno">3</span>     <span class="n">CamelContext</span> <span class="n">context</span> <span class="o">=</span> <span class="kd">super</span><span class="o">.</span><span class="na">createCamelContext</span><span class="o">();</span> 
<span class="lineno">4</span>     <span class="n">context</span><span class="o">.</span><span class="na">addComponent</span><span class="o">(</span><span class="s">&quot;jms&quot;</span><span class="o">,</span> <span class="n">context</span><span class="o">.</span><span class="na">getComponent</span><span class="o">(</span><span class="s">&quot;seda&quot;</span><span class="o">));</span> 
<span class="lineno">5</span>     <span class="k">return</span> <span class="n">context</span><span class="o">;</span>
<span class="lineno">6</span> <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="8-testing.md">8-testing.md</a>
            </aside>
            
            <aside class="page_number">
              61/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 8-testing.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Simulating errors</h1></header>
            
            
            <section><p>De Mock component is ook bruikbaar om netwerkfouten of 'faults' te simuleren</p>
<p>Voorbeeld, de Camel route:</p>
<div class="highlight"><pre><span class="lineno"> 1</span> <span class="n">errorHandler</span><span class="o">(</span><span class="n">defaultErrorHandler</span><span class="o">()</span>
<span class="lineno"> 2</span>     <span class="o">.</span><span class="na">maximumRedeliveries</span><span class="o">(</span><span class="mi">5</span><span class="o">)</span>
<span class="lineno"> 3</span>     <span class="o">.</span><span class="na">redeliveryDelay</span><span class="o">(</span><span class="mi">1000</span><span class="o">));</span>
<span class="lineno"> 4</span> <span class="n">onException</span><span class="o">(</span><span class="n">IOException</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">maximumRedeliveries</span><span class="o">(</span><span class="mi">3</span><span class="o">)</span>
<span class="lineno"> 5</span>     <span class="o">.</span><span class="na">handled</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
<span class="lineno"> 6</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;mock:ftp&quot;</span><span class="o">);</span>
<span class="lineno"> 7</span> <span class="n">from</span><span class="o">(</span><span class="s">&quot;direct:file&quot;</span><span class="o">)</span>
<span class="lineno"> 8</span>     <span class="o">.</span><span class="na">process</span><span class="o">(</span><span class="k">new</span> <span class="n">Processor</span><span class="o">())</span> <span class="o">{</span>
<span class="lineno"> 9</span>         <span class="kd">public</span> <span class="kt">void</span> <span class="nf">process</span><span class="o">(</span><span class="n">Exchange</span> <span class="n">exchange</span><span class="o">)</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span> 
<span class="lineno">10</span>             <span class="k">throw</span> <span class="k">new</span> <span class="nf">ConnectException</span><span class="o">(</span>
<span class="lineno">11</span>                 <span class="s">&quot;Simulated connection error&quot;</span><span class="o">);</span>
<span class="lineno">12</span>     <span class="o">}})</span>
<span class="lineno">13</span>     <span class="o">.</span><span class="na">to</span><span class="o">(</span><span class="s">&quot;mock:http&quot;</span><span class="o">);</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="8-testing.md">8-testing.md</a>
            </aside>
            
            <aside class="page_number">
              62/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 8-testing.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Simulating errors</h1></header>
            
            
            <section><p>En de test method:</p>
<div class="highlight"><pre><span class="lineno">1</span> <span class="nd">@Test</span>
<span class="lineno">2</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">testSimulateConnectionError</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">Exception</span> <span class="o">{</span>
<span class="lineno">3</span> <span class="n">getMockEndpoint</span><span class="o">(</span><span class="s">&quot;mock:http&quot;</span><span class="o">).</span><span class="na">expectedMessageCount</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>
<span class="lineno">4</span>     <span class="n">MockEndpoint</span> <span class="n">ftp</span> <span class="o">=</span> <span class="n">getMockEndpoint</span><span class="o">(</span><span class="s">&quot;mock:ftp&quot;</span><span class="o">);</span>
<span class="lineno">5</span>     <span class="n">ftp</span><span class="o">.</span><span class="na">expectedBodiesReceived</span><span class="o">(</span><span class="s">&quot;Camel rocks&quot;</span><span class="o">);</span>
<span class="lineno">6</span>     <span class="n">template</span><span class="o">.</span><span class="na">sendBody</span><span class="o">(</span><span class="s">&quot;direct:file&quot;</span><span class="o">,</span> <span class="s">&quot;Camel rocks&quot;</span><span class="o">);</span>
<span class="lineno">7</span>     <span class="n">assertMockEndpointsIsSatisfied</span><span class="o">();</span>
<span class="lineno">8</span> <span class="o">}</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="8-testing.md">8-testing.md</a>
            </aside>
            
            <aside class="page_number">
              63/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 9-wrapup.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1><strong>Camel</strong> Wrapup</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="9-wrapup.md">9-wrapup.md</a>
            </aside>
            
            <aside class="page_number">
              64/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 9-wrapup.md -->
      <div class="slide-wrapper">
        <div class="slide">
          <div class="inner">
            
            <header><h1>Vragen?</h1></header>
            
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="9-wrapup.md">9-wrapup.md</a>
            </aside>
            
            <aside class="page_number">
              65/66
            </aside>
          </footer>
        </div>
      </div>
      
      <!-- slide source: 9-wrapup.md -->
      <div class="slide-wrapper">
        <div class="slide has_code">
          <div class="inner">
            
            <header><h1>Einde</h1></header>
            
            
            <section><div class="highlight"><pre><span class="lineno">1</span> <span class="n">System</span><span class="o">.</span><span class="na">exit</span><span class="o">(</span> <span class="mi">0</span> <span class="o">);</span>
</pre></div>
</section>
            
          </div>
          <div class="presenter_notes">
            <header><h1>Presenter Notes</h1></header>
            <section>
            
            </section>
          </div>
          <footer>
            
            <aside class="source">
              Source: <a href="9-wrapup.md">9-wrapup.md</a>
            </aside>
            
            <aside class="page_number">
              66/66
            </aside>
          </footer>
        </div>
      </div>
      
    </div>
  </div>
  
  <div id="toc" class="sidebar hidden">
    <h2>Table of Contents</h2>
    <table>
      <caption>Table of Contents</caption>
      
      <tr id="toc-row-1">
        <th><a href="#slide1">Cursus <strong>Camel</strong></a></th>
        <td><a href="#slide1">1</a></td>
      </tr>
      
      
      <tr id="toc-row-2">
        <th><a href="#slide2">Topics</a></th>
        <td><a href="#slide2">2</a></td>
      </tr>
      
      
      <tr id="toc-row-3">
        <th><a href="#slide3">Referentie</a></th>
        <td><a href="#slide3">3</a></td>
      </tr>
      
      
      <tr id="toc-row-4">
        <th><a href="#slide4">Integratie met <strong>Camel</strong></a></th>
        <td><a href="#slide4">4</a></td>
      </tr>
      
      
      <tr id="toc-row-5">
        <th><a href="#slide5">Integratie</a></th>
        <td><a href="#slide5">5</a></td>
      </tr>
      
      
      <tr id="toc-row-6">
        <th><a href="#slide6">Enterprise Integration Patterns</a></th>
        <td><a href="#slide6">6</a></td>
      </tr>
      
      
      <tr id="toc-row-7">
        <th><a href="#slide7">Apache Camel</a></th>
        <td><a href="#slide7">7</a></td>
      </tr>
      
      
      <tr id="toc-row-8">
        <th><a href="#slide8">Apache Architectuur</a></th>
        <td><a href="#slide8">8</a></td>
      </tr>
      
      
      <tr id="toc-row-9">
        <th><a href="#slide9">Waarom <strong>Camel</strong>?</a></th>
        <td><a href="#slide9">9</a></td>
      </tr>
      
      
      <tr id="toc-row-10">
        <th><a href="#slide10">Waarom Camel?</a></th>
        <td><a href="#slide10">10</a></td>
      </tr>
      
      
      <tr id="toc-row-11">
        <th><a href="#slide11">DSL voorbeelden</a></th>
        <td><a href="#slide11">11</a></td>
      </tr>
      
      
      <tr id="toc-row-12">
        <th><a href="#slide12">Waarom Camel?</a></th>
        <td><a href="#slide12">12</a></td>
      </tr>
      
      
      <tr id="toc-row-13">
        <th><a href="#slide13">Waarom Camel?</a></th>
        <td><a href="#slide13">13</a></td>
      </tr>
      
      
      <tr id="toc-row-14">
        <th><a href="#slide14">Waarom Camel?</a></th>
        <td><a href="#slide14">14</a></td>
      </tr>
      
      
      <tr id="toc-row-15">
        <th><a href="#slide15">Camel voorbeeld</a></th>
        <td><a href="#slide15">15</a></td>
      </tr>
      
      
      <tr id="toc-row-16">
        <th><a href="#slide16">Routing met <strong>Camel</strong></a></th>
        <td><a href="#slide16">16</a></td>
      </tr>
      
      
      <tr id="toc-row-17">
        <th><a href="#slide17">Message</a></th>
        <td><a href="#slide17">17</a></td>
      </tr>
      
      
      <tr id="toc-row-18">
        <th><a href="#slide18">Exchange</a></th>
        <td><a href="#slide18">18</a></td>
      </tr>
      
      
      <tr id="toc-row-19">
        <th><a href="#slide19">CamelContext en Registry</a></th>
        <td><a href="#slide19">19</a></td>
      </tr>
      
      
      <tr id="toc-row-20">
        <th><a href="#slide20">Route, Processor, DSL en Routing Engine</a></th>
        <td><a href="#slide20">20</a></td>
      </tr>
      
      
      <tr id="toc-row-21">
        <th><a href="#slide21">Endpoint, Channel en Component</a></th>
        <td><a href="#slide21">21</a></td>
      </tr>
      
      
      <tr id="toc-row-22">
        <th><a href="#slide22">Consumers en Producers</a></th>
        <td><a href="#slide22">22</a></td>
      </tr>
      
      
      <tr id="toc-row-23">
        <th><a href="#slide23">Oefening: Camel Routing</a></th>
        <td><a href="#slide23">23</a></td>
      </tr>
      
      
      <tr id="toc-row-24">
        <th><a href="#slide24">Mediation met <strong>Camel</strong></a></th>
        <td><a href="#slide24">24</a></td>
      </tr>
      
      
      <tr id="toc-row-25">
        <th><a href="#slide25">Data transformatie</a></th>
        <td><a href="#slide25">25</a></td>
      </tr>
      
      
      <tr id="toc-row-26">
        <th><a href="#slide26">Data transformatie</a></th>
        <td><a href="#slide26">26</a></td>
      </tr>
      
      
      <tr id="toc-row-27">
        <th><a href="#slide27">Transformatie met routes</a></th>
        <td><a href="#slide27">27</a></td>
      </tr>
      
      
      <tr id="toc-row-28">
        <th><a href="#slide28">Transformatie met routes</a></th>
        <td><a href="#slide28">28</a></td>
      </tr>
      
      
      <tr id="toc-row-29">
        <th><a href="#slide29">Transformatie met components</a></th>
        <td><a href="#slide29">29</a></td>
      </tr>
      
      
      <tr id="toc-row-30">
        <th><a href="#slide30">Transformatie met data formats</a></th>
        <td><a href="#slide30">30</a></td>
      </tr>
      
      
      <tr id="toc-row-31">
        <th><a href="#slide31">Transformatie met templates</a></th>
        <td><a href="#slide31">31</a></td>
      </tr>
      
      
      <tr id="toc-row-32">
        <th><a href="#slide32">Transformatie met type converters</a></th>
        <td><a href="#slide32">32</a></td>
      </tr>
      
      
      <tr id="toc-row-33">
        <th><a href="#slide33"><strong>Camel</strong> Beans</a></th>
        <td><a href="#slide33">33</a></td>
      </tr>
      
      
      <tr id="toc-row-34">
        <th><a href="#slide34">Uitdaging</a></th>
        <td><a href="#slide34">34</a></td>
      </tr>
      
      
      <tr id="toc-row-35">
        <th><a href="#slide35">Camel met Beans</a></th>
        <td><a href="#slide35">35</a></td>
      </tr>
      
      
      <tr id="toc-row-36">
        <th><a href="#slide36">Selecteren van beans</a></th>
        <td><a href="#slide36">36</a></td>
      </tr>
      
      
      <tr id="toc-row-37">
        <th><a href="#slide37">Selecteren van bean methods</a></th>
        <td><a href="#slide37">37</a></td>
      </tr>
      
      
      <tr id="toc-row-38">
        <th><a href="#slide38">Selecteren van bean methods</a></th>
        <td><a href="#slide38">38</a></td>
      </tr>
      
      
      <tr id="toc-row-39">
        <th><a href="#slide39">Selecteren van bean en methods</a></th>
        <td><a href="#slide39">39</a></td>
      </tr>
      
      
      <tr id="toc-row-40">
        <th><a href="#slide40">Opzoeken van beans</a></th>
        <td><a href="#slide40">40</a></td>
      </tr>
      
      
      <tr id="toc-row-41">
        <th><a href="#slide41">Opzoeken van beans</a></th>
        <td><a href="#slide41">41</a></td>
      </tr>
      
      
      <tr id="toc-row-42">
        <th><a href="#slide42">Parameter binding</a></th>
        <td><a href="#slide42">42</a></td>
      </tr>
      
      
      <tr id="toc-row-43">
        <th><a href="#slide43">Parameter binding</a></th>
        <td><a href="#slide43">43</a></td>
      </tr>
      
      
      <tr id="toc-row-44">
        <th><a href="#slide44">Error Handling met <strong>Camel</strong></a></th>
        <td><a href="#slide44">44</a></td>
      </tr>
      
      
      <tr id="toc-row-45">
        <th><a href="#slide45">Error Handling</a></th>
        <td><a href="#slide45">45</a></td>
      </tr>
      
      
      <tr id="toc-row-46">
        <th><a href="#slide46">Throwable/Exception</a></th>
        <td><a href="#slide46">46</a></td>
      </tr>
      
      
      <tr id="toc-row-47">
        <th><a href="#slide47">Fault</a></th>
        <td><a href="#slide47">47</a></td>
      </tr>
      
      
      <tr id="toc-row-48">
        <th><a href="#slide48">Error handlers</a></th>
        <td><a href="#slide48">48</a></td>
      </tr>
      
      
      <tr id="toc-row-49">
        <th><a href="#slide49">DefaultErrorHandler</a></th>
        <td><a href="#slide49">49</a></td>
      </tr>
      
      
      <tr id="toc-row-50">
        <th><a href="#slide50">Error Handler features</a></th>
        <td><a href="#slide50">50</a></td>
      </tr>
      
      
      <tr id="toc-row-51">
        <th><a href="#slide51">Redelivery policy</a></th>
        <td><a href="#slide51">51</a></td>
      </tr>
      
      
      <tr id="toc-row-52">
        <th><a href="#slide52">Scope</a></th>
        <td><a href="#slide52">52</a></td>
      </tr>
      
      
      <tr id="toc-row-53">
        <th><a href="#slide53">Error handling: exception policies</a></th>
        <td><a href="#slide53">53</a></td>
      </tr>
      
      
      <tr id="toc-row-54">
        <th><a href="#slide54">Error Handling</a></th>
        <td><a href="#slide54">54</a></td>
      </tr>
      
      
      <tr id="toc-row-55">
        <th><a href="#slide55">Testen met <strong>Camel</strong></a></th>
        <td><a href="#slide55">55</a></td>
      </tr>
      
      
      <tr id="toc-row-56">
        <th><a href="#slide56">Camel JUnit Extensions</a></th>
        <td><a href="#slide56">56</a></td>
      </tr>
      
      
      <tr id="toc-row-57">
        <th><a href="#slide57">Camel JUnit Extensions</a></th>
        <td><a href="#slide57">57</a></td>
      </tr>
      
      
      <tr id="toc-row-58">
        <th><a href="#slide58">Using the Mock component</a></th>
        <td><a href="#slide58">58</a></td>
      </tr>
      
      
      <tr id="toc-row-59">
        <th><a href="#slide59">MockEndpoint methods</a></th>
        <td><a href="#slide59">59</a></td>
      </tr>
      
      
      <tr id="toc-row-60">
        <th><a href="#slide60">MockEndpoint voorbeeld</a></th>
        <td><a href="#slide60">60</a></td>
      </tr>
      
      
      <tr id="toc-row-61">
        <th><a href="#slide61">Simuleren van componenten</a></th>
        <td><a href="#slide61">61</a></td>
      </tr>
      
      
      <tr id="toc-row-62">
        <th><a href="#slide62">Simulating errors</a></th>
        <td><a href="#slide62">62</a></td>
      </tr>
      
      
      <tr id="toc-row-63">
        <th><a href="#slide63">Simulating errors</a></th>
        <td><a href="#slide63">63</a></td>
      </tr>
      
      
      <tr id="toc-row-64">
        <th><a href="#slide64"><strong>Camel</strong> Wrapup</a></th>
        <td><a href="#slide64">64</a></td>
      </tr>
      
      
      <tr id="toc-row-65">
        <th><a href="#slide65">Vragen?</a></th>
        <td><a href="#slide65">65</a></td>
      </tr>
      
      
      <tr id="toc-row-66">
        <th><a href="#slide66">Einde</a></th>
        <td><a href="#slide66">66</a></td>
      </tr>
      
      
    </table>
  </div>
  
  <div id="help" class="sidebar hidden">
    <h2>Help</h2>
    <table>
      <caption>Help</caption>
      <tr>
        <th>Table of Contents</th>
        <td>t</td>
      </tr>
      <tr>
        <th>Exposé</th>
        <td>ESC</td>
      </tr>
      <tr>
        <th>Full screen slides</th>
        <td>e</td>
      </tr>
      <tr>
        <th>Presenter View</th>
        <td>p</td>
      </tr>
      <tr>
        <th>Source Files</th>
        <td>s</td>
      </tr>
      <tr>
        <th>Slide Numbers</th>
        <td>n</td>
      </tr>
      <tr>
        <th>Toggle screen blanking</th>
        <td>b</td>
      </tr>
      <tr>
        <th>Show/hide slide context</th>
        <td>c</td>
      </tr>
      <tr>
        <th>Notes</th>
        <td>2</td>
      </tr>
      <tr>
        <th>Help</th>
        <td>h</td>
      </tr>
    </table>
  </div>
  <script>main()</script>
</body>
</html>